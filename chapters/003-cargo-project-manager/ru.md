# День 3: Cargo — менеджер проектов как управляющий портфелем

## Аналогия из трейдинга

Представь управляющего инвестиционным портфелем:
- Он **создаёт** портфели для клиентов
- **Добавляет** активы (акции, облигации, крипту)
- **Управляет** зависимостями между активами
- **Следит** за тем, чтобы всё работало как надо
- **Оптимизирует** портфель для лучших результатов

Cargo делает то же самое для твоих проектов на Rust!

## Что умеет Cargo

| Команда | Что делает | Аналогия |
|---------|-----------|----------|
| `cargo new` | Создаёт проект | Открыть новый портфель |
| `cargo build` | Компилирует код | Собрать активы |
| `cargo run` | Запускает программу | Начать торговлю |
| `cargo test` | Запускает тесты | Проверить стратегию |
| `cargo add` | Добавляет библиотеку | Добавить актив в портфель |

## Создание проекта

```bash
cargo new trading_bot
```

Создаётся структура:
```
trading_bot/
├── Cargo.toml      # Паспорт проекта
├── Cargo.lock      # Точные версии зависимостей
└── src/
    └── main.rs     # Главный файл кода
```

## Cargo.toml — паспорт проекта

```toml
[package]
name = "trading_bot"
version = "0.1.0"
edition = "2021"

[dependencies]
```

- `name` — имя проекта (как название фонда)
- `version` — версия (как квартальный отчёт: v1, v2...)
- `edition` — версия Rust (2021 — самая свежая стабильная)
- `[dependencies]` — список внешних библиотек

## Добавление зависимостей

Допустим, нам нужна библиотека для работы со временем:

```bash
cargo add chrono
```

Cargo.toml теперь выглядит так:
```toml
[dependencies]
chrono = "0.4"
```

**Аналогия:** Это как добавить ETF в портфель. `chrono` — это "пакет" функций для работы с датами, который уже написали за нас.

## Популярные библиотеки для трейдинга

```toml
[dependencies]
# Работа со временем
chrono = "0.4"

# HTTP запросы к API
reqwest = { version = "0.11", features = ["json"] }

# Работа с JSON
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# Асинхронность
tokio = { version = "1", features = ["full"] }

# Десятичные числа (точные цены)
rust_decimal = "1.33"
```

## Сборка проекта

### Режим разработки (быстрая компиляция)
```bash
cargo build
```

Результат в `target/debug/trading_bot`

### Режим релиза (оптимизированный код)
```bash
cargo build --release
```

Результат в `target/release/trading_bot`

**Аналогия:**
- `debug` — тренировочный счёт, где мы тестируем
- `release` — боевой счёт с реальными деньгами

## Запуск

```bash
cargo run              # debug режим
cargo run --release    # release режим (быстрее работает)
```

## Полезные команды

```bash
cargo check     # Быстрая проверка ошибок (без сборки)
cargo clean     # Удалить собранные файлы
cargo update    # Обновить зависимости
cargo doc       # Сгенерировать документацию
```

## Cargo.lock — фиксация версий

Этот файл создаётся автоматически и содержит **точные** версии всех библиотек.

**Аналогия:** Это как snapshot портфеля на конкретную дату. Если chrono обновится с 0.4.31 до 0.4.32, твой проект всё равно будет использовать 0.4.31, пока ты не обновишь.

Важно: добавляй `Cargo.lock` в git для исполняемых программ (ботов), но не для библиотек.

## Рабочие пространства (Workspaces)

Когда проект растёт, его можно разбить на части:

```
trading_system/
├── Cargo.toml           # Главный файл
├── bot/                  # Торговый бот
│   ├── Cargo.toml
│   └── src/
├── indicators/           # Библиотека индикаторов
│   ├── Cargo.toml
│   └── src/
└── backtest/            # Бэктестинг
    ├── Cargo.toml
    └── src/
```

Главный `Cargo.toml`:
```toml
[workspace]
members = ["bot", "indicators", "backtest"]
```

**Аналогия:** Это как разделить фонд на несколько стратегий, которые можно развивать независимо.

## Практический пример

Создадим проект торгового бота:

```bash
cargo new my_trading_bot
cd my_trading_bot
cargo add chrono serde serde_json
```

Обнови `src/main.rs`:

```rust
use chrono::Utc;

fn main() {
    let now = Utc::now();
    println!("Торговый бот запущен!");
    println!("Текущее время (UTC): {}", now);
    println!("Версия: 0.1.0");
}
```

Запусти:
```bash
cargo run
```

## Что мы узнали

| Концепция | Описание |
|-----------|----------|
| Cargo.toml | Конфигурация проекта |
| dependencies | Внешние библиотеки |
| cargo build | Компиляция |
| cargo run | Запуск |
| --release | Оптимизированная сборка |

## Домашнее задание

1. Создай проект `price_tracker`
2. Добавь зависимости: `chrono` и `rust_decimal`
3. Напиши программу, которая выводит текущее время и "цену" BTC (пока просто число)
4. Собери проект в release режиме
5. Сравни размер файлов в `target/debug` и `target/release`

## Навигация

[← Предыдущий день](../002-hello-trading-world/ru.md) | [Следующий день →](../004-variables-asset-prices/ru.md)
