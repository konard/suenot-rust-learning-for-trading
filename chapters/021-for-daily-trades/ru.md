# –î–µ–Ω—å 21: for ‚Äî –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –¥–Ω–µ–≤–Ω—ã–º —Å–¥–µ–ª–∫–∞–º

## –ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ —Ç—Ä–µ–π–¥–∏–Ω–≥–∞

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –≤ –∫–æ–Ω—Ü–µ –¥–Ω—è —Ç—ã –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—à—å **–∫–∞–∂–¥—É—é —Å–¥–µ–ª–∫—É** –≤ —Å–≤–æ—ë–º –∂—É—Ä–Ω–∞–ª–µ, —á—Ç–æ–±—ã –ø–æ—Å—á–∏—Ç–∞—Ç—å –æ–±—â—É—é –ø—Ä–∏–±—ã–ª—å. –¢—ã –±–µ—Ä—ë—à—å –ø–µ—Ä–≤—É—é —Å–¥–µ–ª–∫—É, –∑–∞–ø–∏—Å—ã–≤–∞–µ—à—å PnL, –∑–∞—Ç–µ–º –≤—Ç–æ—Ä—É—é, —Ç—Ä–µ—Ç—å—é... –∏ —Ç–∞–∫ –¥–æ –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞. –¶–∏–∫–ª `for` –≤ Rust —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ ‚Äî –æ–Ω **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç** –ø–æ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É –∫–æ–ª–ª–µ–∫—Ü–∏–∏.

## –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å for

```rust
fn main() {
    let prices = [42000.0, 42500.0, 41800.0, 42200.0, 42100.0];

    for price in prices {
        println!("–¶–µ–Ω–∞: ${:.2}", price);
    }
}
```

## –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –º–∞—Å—Å–∏–≤—É —Ü–µ–Ω

```rust
fn main() {
    let daily_closes = [42000.0, 42500.0, 41800.0, 42200.0, 42100.0];

    let mut total = 0.0;
    for price in daily_closes {
        total += price;
    }

    let average = total / daily_closes.len() as f64;
    println!("–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è: ${:.2}", average);
}
```

## –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ —Å—Å—ã–ª–∫–∞–º

–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–ª–∞–¥–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–º:

```rust
fn main() {
    let prices = [42000.0, 42500.0, 41800.0];

    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Å—ã–ª–∫—É, —á—Ç–æ–±—ã –Ω–µ –∑–∞–±–∏—Ä–∞—Ç—å –≤–ª–∞–¥–µ–Ω–∏–µ
    for price in &prices {
        println!("–¶–µ–Ω–∞: ${:.2}", price);
    }

    // prices –≤—Å—ë –µ—â—ë –¥–æ—Å—Ç—É–ø–µ–Ω
    println!("–í—Å–µ–≥–æ —Ü–µ–Ω: {}", prices.len());
}
```

## –ò—Ç–µ—Ä–∞—Ü–∏—è —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ (enumerate)

```rust
fn main() {
    let trades_pnl = [150.0, -75.0, 200.0, -30.0, 180.0];

    println!("–ñ—É—Ä–Ω–∞–ª —Å–¥–µ–ª–æ–∫:");
    println!("‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ");

    for (index, pnl) in trades_pnl.iter().enumerate() {
        let status = if *pnl >= 0.0 { "PROFIT" } else { "LOSS" };
        println!("–°–¥–µ–ª–∫–∞ #{}: {:>8.2} [{}]", index + 1, pnl, status);
    }
}
```

## –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º

```rust
fn main() {
    // –î–∏–∞–ø–∞–∑–æ–Ω –æ—Ç 1 –¥–æ 5 (–Ω–µ –≤–∫–ª—é—á–∞—è 5)
    println!("–¢–æ—Ä–≥–æ–≤—ã–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏:");
    for day in 1..5 {
        println!("  –î–µ–Ω—å {}", day);
    }

    // –î–∏–∞–ø–∞–∑–æ–Ω –æ—Ç 1 –¥–æ 5 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ
    println!("\n–í—Å–µ 5 –¥–Ω–µ–π:");
    for day in 1..=5 {
        println!("  –î–µ–Ω—å {}", day);
    }
}
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫

```rust
fn main() {
    let start_hour = 9;  // –û—Ç–∫—Ä—ã—Ç–∏–µ —Ä—ã–Ω–∫–∞
    let end_hour = 16;   // –ó–∞–∫—Ä—ã—Ç–∏–µ —Ä—ã–Ω–∫–∞

    println!("–¢–æ—Ä–≥–æ–≤—ã–µ —á–∞—Å—ã:");
    for hour in start_hour..=end_hour {
        println!("  {:02}:00 - —Ä—ã–Ω–æ–∫ –æ—Ç–∫—Ä—ã—Ç", hour);
    }
}
```

## –ü–æ–∏—Å–∫ –º–∞–∫—Å–∏–º—É–º–∞ –∏ –º–∏–Ω–∏–º—É–º–∞

```rust
fn main() {
    let prices = [42000.0, 42500.0, 41800.0, 42200.0, 43100.0, 41500.0];

    let mut min_price = f64::MAX;
    let mut max_price = f64::MIN;

    for &price in &prices {
        if price < min_price {
            min_price = price;
        }
        if price > max_price {
            max_price = price;
        }
    }

    println!("–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: ${:.2}", min_price);
    println!("–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: ${:.2}", max_price);
    println!("–î–∏–∞–ø–∞–∑–æ–Ω: ${:.2}", max_price - min_price);
}
```

## –ü–æ–¥—Å—á—ë—Ç –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –∏ —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫

```rust
fn main() {
    let trades = [150.0, -75.0, 200.0, -30.0, 180.0, -50.0, 90.0];

    let mut wins = 0;
    let mut losses = 0;
    let mut total_profit = 0.0;
    let mut total_loss = 0.0;

    for &pnl in &trades {
        if pnl >= 0.0 {
            wins += 1;
            total_profit += pnl;
        } else {
            losses += 1;
            total_loss += pnl.abs();
        }
    }

    let win_rate = (wins as f64 / trades.len() as f64) * 100.0;
    let profit_factor = if total_loss > 0.0 {
        total_profit / total_loss
    } else {
        f64::INFINITY
    };

    println!("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
    println!("‚ïë      –°–¢–ê–¢–ò–°–¢–ò–ö–ê –°–î–ï–õ–û–ö        ‚ïë");
    println!("‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£");
    println!("‚ïë –ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö:    {:>14} ‚ïë", wins);
    println!("‚ïë –£–±—ã—Ç–æ—á–Ω—ã—Ö:     {:>14} ‚ïë", losses);
    println!("‚ïë Win Rate:      {:>13.1}% ‚ïë", win_rate);
    println!("‚ïë Profit Factor: {:>14.2} ‚ïë", profit_factor);
    println!("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù");
}
```

## –†–∞—Å—á—ë—Ç —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ (SMA)

```rust
fn main() {
    let prices = [42000.0, 42100.0, 42050.0, 42200.0, 42150.0, 42300.0, 42250.0];
    let period = 3;

    println!("SMA-{} –¥–ª—è –¥–Ω–µ–≤–Ω—ã—Ö —Ü–µ–Ω:", period);
    println!("‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ");

    for i in 0..prices.len() {
        if i + 1 >= period {
            let mut sum = 0.0;
            for j in (i + 1 - period)..=i {
                sum += prices[j];
            }
            let sma = sum / period as f64;
            println!("–î–µ–Ω—å {}: —Ü–µ–Ω–∞ = ${:.2}, SMA = ${:.2}", i + 1, prices[i], sma);
        } else {
            println!("–î–µ–Ω—å {}: —Ü–µ–Ω–∞ = ${:.2}, SMA = N/A (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö)", i + 1, prices[i]);
        }
    }
}
```

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–¥–µ–ª–æ–∫

```rust
fn main() {
    let trades = [
        ("BTC", 150.0),
        ("ETH", -75.0),
        ("BTC", 200.0),
        ("SOL", -30.0),
        ("BTC", 180.0),
    ];

    println!("–¢–æ–ª—å–∫–æ —Å–¥–µ–ª–∫–∏ —Å BTC:");

    let mut btc_total = 0.0;
    for (symbol, pnl) in &trades {
        if *symbol == "BTC" {
            println!("  {} -> ${:.2}", symbol, pnl);
            btc_total += pnl;
        }
    }

    println!("–ò—Ç–æ–≥–æ –ø–æ BTC: ${:.2}", btc_total);
}
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è

```rust
fn main() {
    let portfolio = [
        ("BTC", 0.5, 42000.0),    // (—Ç–∏–∫–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Ü–µ–Ω–∞)
        ("ETH", 10.0, 2200.0),
        ("SOL", 100.0, 25.0),
        ("AVAX", 50.0, 35.0),
    ];

    println!("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
    println!("‚ïë              –ú–û–ô –ü–û–†–¢–§–ï–õ–¨                  ‚ïë");
    println!("‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£");
    println!("‚ïë –¢–∏–∫–µ—Ä   –ö–æ–ª-–≤–æ      –¶–µ–Ω–∞         –°—Ç–æ–∏–º–æ—Å—Ç—å ‚ïë");
    println!("‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£");

    let mut total_value = 0.0;

    for (ticker, quantity, price) in &portfolio {
        let value = quantity * price;
        total_value += value;
        println!("‚ïë {:6} {:>7.2}  ${:>9.2}  ${:>12.2} ‚ïë",
                 ticker, quantity, price, value);
    }

    println!("‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£");
    println!("‚ïë –ò–¢–û–ì–û                       ${:>12.2} ‚ïë", total_value);
    println!("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù");
}
```

## –í–ª–æ–∂–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã: –∞–Ω–∞–ª–∏–∑ –ø–æ –¥–Ω—è–º –∏ —á–∞—Å–∞–º

```rust
fn main() {
    // –¶–µ–Ω—ã –ø–æ –¥–Ω—è–º (—Å—Ç—Ä–æ–∫–∏) –∏ —á–∞—Å–∞–º (—Å—Ç–æ–ª–±—Ü—ã)
    let hourly_prices = [
        [42000.0, 42100.0, 42050.0, 42200.0],  // –î–µ–Ω—å 1
        [42150.0, 42300.0, 42250.0, 42400.0],  // –î–µ–Ω—å 2
        [42350.0, 42200.0, 42100.0, 42150.0],  // –î–µ–Ω—å 3
    ];

    println!("–î–Ω–µ–≤–Ω—ã–µ –º–∞–∫—Å–∏–º—É–º—ã –∏ –º–∏–Ω–∏–º—É–º—ã:");
    println!("‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ");

    for (day, prices) in hourly_prices.iter().enumerate() {
        let mut min = f64::MAX;
        let mut max = f64::MIN;

        for &price in prices {
            if price < min { min = price; }
            if price > max { max = price; }
        }

        println!("–î–µ–Ω—å {}: –º–∏–Ω = ${:.2}, –º–∞–∫—Å = ${:.2}, –¥–∏–∞–ø–∞–∑–æ–Ω = ${:.2}",
                 day + 1, min, max, max - min);
    }
}
```

## –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–∞ —Å break

```rust
fn main() {
    let prices = [42000.0, 42100.0, 41500.0, 42200.0, 42300.0];
    let stop_loss = 41800.0;

    println!("–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω—ã (—Å—Ç–æ–ø-–ª–æ—Å—Å: ${:.2}):", stop_loss);

    for (i, &price) in prices.iter().enumerate() {
        println!("–ß–∞—Å {}: ${:.2}", i + 1, price);

        if price < stop_loss {
            println!("‚ö†Ô∏è  –°–¢–û–ü-–õ–û–°–° –°–†–ê–ë–û–¢–ê–õ! –í—ã—Ö–æ–¥ –∏–∑ –ø–æ–∑–∏—Ü–∏–∏.");
            break;
        }
    }

    println!("–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≤–µ—Ä—à—ë–Ω.");
}
```

## –ü—Ä–æ–ø—É—Å–∫ –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Å continue

```rust
fn main() {
    let trades = [150.0, -75.0, 0.0, 200.0, -30.0, 0.0, 180.0];

    println!("–ó–Ω–∞—á–∏–º—ã–µ —Å–¥–µ–ª–∫–∏ (–ø—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω—É–ª–µ–≤—ã–µ):");

    let mut count = 0;
    for &pnl in &trades {
        if pnl == 0.0 {
            continue;  // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–¥–µ–ª–∫–∏ —Å –Ω—É–ª–µ–≤—ã–º PnL
        }

        count += 1;
        let status = if pnl > 0.0 { "+" } else { "" };
        println!("  –°–¥–µ–ª–∫–∞: {}{:.2}", status, pnl);
    }

    println!("–í—Å–µ–≥–æ –∑–Ω–∞—á–∏–º—ã—Ö —Å–¥–µ–ª–æ–∫: {}", count);
}
```

## –ò—Ç–µ—Ä–∞—Ü–∏—è —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º (iter_mut)

```rust
fn main() {
    let mut prices = [42000.0, 42500.0, 41800.0, 42200.0];
    let commission_rate = 0.001;  // 0.1%

    println!("–¶–µ–Ω—ã –¥–æ –∫–æ–º–∏—Å—Å–∏–∏:  {:?}", prices);

    // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ–º–∏—Å—Å–∏—é –∫ –∫–∞–∂–¥–æ–π —Ü–µ–Ω–µ
    for price in &mut prices {
        *price *= (1.0 - commission_rate);
    }

    println!("–¶–µ–Ω—ã –ø–æ—Å–ª–µ –∫–æ–º–∏—Å—Å–∏–∏: {:?}", prices);
}
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç

```rust
fn main() {
    let daily_trades = [
        vec![100.0, -50.0, 75.0],           // –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
        vec![-30.0, 120.0],                  // –í—Ç–æ—Ä–Ω–∏–∫
        vec![80.0, -40.0, 60.0, -20.0],     // –°—Ä–µ–¥–∞
        vec![150.0],                         // –ß–µ—Ç–≤–µ—Ä–≥
        vec![-80.0, 90.0, -10.0, 50.0],     // –ü—è—Ç–Ω–∏—Ü–∞
    ];

    let days = ["–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫", "–í—Ç–æ—Ä–Ω–∏–∫", "–°—Ä–µ–¥–∞", "–ß–µ—Ç–≤–µ—Ä–≥", "–ü—è—Ç–Ω–∏—Ü–∞"];

    println!("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
    println!("‚ïë          –ù–ï–î–ï–õ–¨–ù–´–ô –û–¢–ß–Å–¢ –ü–û –°–î–ï–õ–ö–ê–ú         ‚ïë");
    println!("‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£");

    let mut weekly_total = 0.0;
    let mut best_day = (0, f64::MIN);
    let mut worst_day = (0, f64::MAX);

    for (i, trades) in daily_trades.iter().enumerate() {
        let mut day_pnl = 0.0;
        let mut day_wins = 0;

        for &pnl in trades {
            day_pnl += pnl;
            if pnl > 0.0 { day_wins += 1; }
        }

        let win_rate = (day_wins as f64 / trades.len() as f64) * 100.0;
        weekly_total += day_pnl;

        if day_pnl > best_day.1 { best_day = (i, day_pnl); }
        if day_pnl < worst_day.1 { worst_day = (i, day_pnl); }

        let emoji = if day_pnl >= 0.0 { "üìà" } else { "üìâ" };
        println!("‚ïë {} {:11}: {:>+8.2} ({} —Å–¥–µ–ª–æ–∫, WR: {:.0}%) ‚ïë",
                 emoji, days[i], day_pnl, trades.len(), win_rate);
    }

    println!("‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£");
    println!("‚ïë –ò—Ç–æ–≥–æ –∑–∞ –Ω–µ–¥–µ–ª—é:              {:>+12.2} ‚ïë", weekly_total);
    println!("‚ïë –õ—É—á—à–∏–π –¥–µ–Ω—å:   {:11} ({:>+8.2}) ‚ïë", days[best_day.0], best_day.1);
    println!("‚ïë –•—É–¥—à–∏–π –¥–µ–Ω—å:   {:11} ({:>+8.2}) ‚ïë", days[worst_day.0], worst_day.1);
    println!("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù");
}
```

## –ß—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏

| –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è | –°–∏–Ω—Ç–∞–∫—Å–∏—Å | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|-------------|-----------|-------------------|
| –ü—Ä–æ—Å—Ç–æ–π for | `for x in collection` | –ò—Ç–µ—Ä–∞—Ü–∏—è —Å –≤–ª–∞–¥–µ–Ω–∏–µ–º |
| –ü–æ —Å—Å—ã–ª–∫–µ | `for x in &collection` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é |
| –° –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º | `for x in &mut coll` | –ò–∑–º–µ–Ω–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã |
| –° –∏–Ω–¥–µ–∫—Å–æ–º | `.iter().enumerate()` | –ù—É–∂–µ–Ω –Ω–æ–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞ |
| –î–∏–∞–ø–∞–∑–æ–Ω | `for i in 0..n` | –°—á—ë—Ç—á–∏–∫ –∏—Ç–µ—Ä–∞—Ü–∏–π |
| break | `break;` | –†–∞–Ω–Ω–∏–π –≤—ã—Ö–æ–¥ |
| continue | `continue;` | –ü—Ä–æ–ø—É—Å–∫ –∏—Ç–µ—Ä–∞—Ü–∏–∏ |

## –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ

1. –ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é `calculate_daily_returns(prices: &[f64]) -> Vec<f64>`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–Ω–µ–≤–Ω—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏: `(price[i] - price[i-1]) / price[i-1]`

2. –°–æ–∑–¥–∞–π —Ñ—É–Ω–∫—Ü–∏—é `find_best_trade(trades: &[(String, f64)]) -> Option<(String, f64)>`, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Ö–æ–¥–∏—Ç —Å–∞–º—É—é –ø—Ä–∏–±—ã–ª—å–Ω—É—é —Å–¥–µ–ª–∫—É

3. –†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é `calculate_drawdown(equity: &[f64]) -> f64`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—á–∏—Å–ª—è–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ—Å–∞–¥–∫—É –ø–æ—Ä—Ç—Ñ–µ–ª—è

4. –ù–∞–ø–∏—à–∏ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ç–æ—Ä–≥–æ–≤—É—é –Ω–µ–¥–µ–ª—é: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è –∏ –≤—ã–≤–æ–¥–∏—Ç –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤

## –ù–∞–≤–∏–≥–∞—Ü–∏—è

[‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å](../020-loop-market-scanner/ru.md) | [–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å ‚Üí](../022-while-waiting-for-signal/ru.md)
