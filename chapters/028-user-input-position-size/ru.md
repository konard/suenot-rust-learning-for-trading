# ะะตะฝั 28: ะะฒะพะด ะฟะพะปัะทะพะฒะฐัะตะปั โ ััะตะนะดะตั ะฒะฒะพะดะธั ัะฐะทะผะตั ะฟะพะทะธัะธะธ

## ะะฝะฐะปะพะณะธั ะธะท ััะตะนะดะธะฝะณะฐ

ะัะตะดััะฐะฒั ัะพัะณะพะฒัะน ัะตัะผะธะฝะฐะป. ะะตัะตะด ะพัะบัััะธะตะผ ะฟะพะทะธัะธะธ ััะตะนะดะตั ะดะพะปะถะตะฝ **ะฒะฒะตััะธ ะดะฐะฝะฝัะต**: ัะฐะทะผะตั ะฟะพะทะธัะธะธ, ัะตะฝั ะฒัะพะดะฐ, ััะพะฟ-ะปะพัั. ะัะพะณัะฐะผะผะฐ ะฝะต ะผะพะถะตั ัะณะฐะดะฐัั ััะธ ะทะฝะฐัะตะฝะธั โ ะพะฝะฐ ะดะพะปะถะฝะฐ **ัะฟัะพัะธัั** ะฟะพะปัะทะพะฒะฐัะตะปั ะธ **ะฟัะพัะธัะฐัั** ะตะณะพ ะพัะฒะตั.

ะ Rust ะดะปั ััะพะณะพ ะธัะฟะพะปัะทัะตััั ะผะพะดัะปั `std::io` โ ะพะฝ ะฟะพะทะฒะพะปัะตั ะฟัะพะณัะฐะผะผะต ะพะฑัะฐัััั ั ะฟะพะปัะทะพะฒะฐัะตะปะตะผ ัะตัะตะท ะบะพะฝัะพะปั.

## ะะฐะทะพะฒัะน ะฒะฒะพะด: ัะธัะฐะตะผ ัััะพะบั

```rust
use std::io;

fn main() {
    println!("ะะฒะตะดะธัะต ัะฐะทะผะตั ะฟะพะทะธัะธะธ (ะฒ ะปะพัะฐั):");

    let mut input = String::new();

    io::stdin()
        .read_line(&mut input)
        .expect("ะัะธะฑะบะฐ ััะตะฝะธั ะฒะฒะพะดะฐ");

    println!("ะั ะฒะฒะตะปะธ: {}", input.trim());
}
```

**ะะฐะทะฑะตััะผ ะฟะพ ัะฐัััะผ:**

1. `use std::io` โ ะฟะพะดะบะปััะฐะตะผ ะผะพะดัะปั ะฒะฒะพะดะฐ-ะฒัะฒะพะดะฐ
2. `let mut input = String::new()` โ ัะพะทะดะฐัะผ ะธะทะผะตะฝัะตะผัั ะฟััััั ัััะพะบั
3. `io::stdin()` โ ะฟะพะปััะฐะตะผ ััะฐะฝะดะฐััะฝัะน ะฒะฒะพะด (ะบะปะฐะฒะธะฐัััะฐ)
4. `.read_line(&mut input)` โ ัะธัะฐะตะผ ัััะพะบั ะฒ ะฝะฐัั ะฟะตัะตะผะตะฝะฝัั
5. `.expect("...")` โ ะพะฑัะฐะฑะฐััะฒะฐะตะผ ะฒะพะทะผะพะถะฝัั ะพัะธะฑะบั
6. `input.trim()` โ ัะฑะธัะฐะตะผ ัะธะผะฒะพะป ะฝะพะฒะพะน ัััะพะบะธ `\n`

## ะะพัะตะผั mut ะธ &mut?

```rust
use std::io;

fn main() {
    // mut โ ะฟะพัะพะผั ััะพ read_line ะะะะะะฏะะข ััั ัััะพะบั
    let mut position_size = String::new();

    println!("ะะฐะทะผะตั ะฟะพะทะธัะธะธ:");

    // &mut โ ะฟะตัะตะดะฐัะผ ะธะทะผะตะฝัะตะผัั ัััะปะบั
    // read_line ะทะฐะฟะธััะฒะฐะตั ะดะฐะฝะฝัะต ะฒ ะฝะฐัั ะฟะตัะตะผะตะฝะฝัั
    io::stdin()
        .read_line(&mut position_size)
        .expect("ะัะธะฑะบะฐ ััะตะฝะธั");

    println!("ะะพะทะธัะธั: {} ะปะพัะพะฒ", position_size.trim());
}
```

**ะะฝะฐะปะพะณะธั:** ะัะตะดััะฐะฒั, ััะพ ัั ะดะฐััั ะฐะฝะฐะปะธัะธะบั ะฟัััะพะน ะฑะปะฐะฝะบ (`String::new()`) ะธ ะณะพะฒะพัะธัั: "ะะฐะฟะธัะธ ััะดะฐ ัะฐะทะผะตั ะฟะพะทะธัะธะธ". ะะฝ **ะธะทะผะตะฝัะตั** ัะฒะพะน ะฑะปะฐะฝะบ โ ะฟะพััะพะผั ะฝัะถะตะฝ `mut`.

## ะงัะตะฝะธะต ะฝะตัะบะพะปัะบะธั ะทะฝะฐัะตะฝะธะน

```rust
use std::io;

fn main() {
    let mut ticker = String::new();
    let mut quantity = String::new();
    let mut price = String::new();

    println!("=== ะะะะซะ ะะะะะ ===");

    println!("ะขะธะบะตั (ะฝะฐะฟัะธะผะตั, AAPL):");
    io::stdin().read_line(&mut ticker).expect("ะัะธะฑะบะฐ");

    println!("ะะพะปะธัะตััะฒะพ ะฐะบัะธะน:");
    io::stdin().read_line(&mut quantity).expect("ะัะธะฑะบะฐ");

    println!("ะฆะตะฝะฐ ะฒัะพะดะฐ:");
    io::stdin().read_line(&mut price).expect("ะัะธะฑะบะฐ");

    println!("\n=== ะะะะขะะะะะะะะะ ===");
    println!("ะขะธะบะตั: {}", ticker.trim());
    println!("ะะพะปะธัะตััะฒะพ: {}", quantity.trim());
    println!("ะฆะตะฝะฐ: ${}", price.trim());
}
```

## ะะฒะพะด ั ะฟะพะดัะบะฐะทะบะพะน (ะฟัะพะผะฟัะพะผ)

```rust
use std::io::{self, Write};

fn main() {
    print!("ะะฒะตะดะธัะต ัะธะบะตั: ");
    io::stdout().flush().unwrap(); // ะัะธะฝัะดะธัะตะปัะฝะพ ะฒัะฒะพะดะธะผ ัะตะบัั

    let mut ticker = String::new();
    io::stdin().read_line(&mut ticker).expect("ะัะธะฑะบะฐ");

    println!("ะั ะฒัะฑัะฐะปะธ: {}", ticker.trim().to_uppercase());
}
```

**ะะพัะตะผั flush()?** `print!` ะฝะต ะดะพะฑะฐะฒะปัะตั ะฟะตัะตะฒะพะด ัััะพะบะธ, ะธ ัะตะบัั ะผะพะถะตั ะฝะต ะพัะพะฑัะฐะทะธัััั ััะฐะทั. `flush()` ะทะฐััะฐะฒะปัะตั ะฒัะฒะตััะธ ะฑััะตั ะฝะตะผะตะดะปะตะฝะฝะพ.

## ะคัะฝะบัะธั ะดะปั ัะดะพะฑะฝะพะณะพ ััะตะฝะธั ะฒะฒะพะดะฐ

```rust
use std::io::{self, Write};

fn read_input(prompt: &str) -> String {
    print!("{}", prompt);
    io::stdout().flush().unwrap();

    let mut input = String::new();
    io::stdin()
        .read_line(&mut input)
        .expect("ะัะธะฑะบะฐ ััะตะฝะธั ะฒะฒะพะดะฐ");

    input.trim().to_string()
}

fn main() {
    let ticker = read_input("ะขะธะบะตั: ");
    let quantity = read_input("ะะพะปะธัะตััะฒะพ: ");
    let entry_price = read_input("ะฆะตะฝะฐ ะฒัะพะดะฐ: ");
    let stop_loss = read_input("ะกัะพะฟ-ะปะพัั: ");

    println!("\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ");
    println!("โ      ะะะะะะะขะะซ ะะะะะะ         โ");
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ");
    println!("โ ะขะธะบะตั:      {:>17} โ", ticker);
    println!("โ ะะพะปะธัะตััะฒะพ: {:>17} โ", quantity);
    println!("โ ะฆะตะฝะฐ ะฒัะพะดะฐ: ${:>16} โ", entry_price);
    println!("โ ะกัะพะฟ-ะปะพัั:  ${:>16} โ", stop_loss);
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ");
}
```

## ะะตะฝั ะฒัะฑะพัะฐ ะดะตะนััะฒะธั

```rust
use std::io::{self, Write};

fn read_input(prompt: &str) -> String {
    print!("{}", prompt);
    io::stdout().flush().unwrap();

    let mut input = String::new();
    io::stdin().read_line(&mut input).expect("ะัะธะฑะบะฐ");
    input.trim().to_string()
}

fn main() {
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ");
    println!("โ     ะขะะะะะะซะ ะขะะะะะะะ         โ");
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ");
    println!("โ  1. ะัะบัััั ะฟะพะทะธัะธั           โ");
    println!("โ  2. ะะฐะบัััั ะฟะพะทะธัะธั           โ");
    println!("โ  3. ะะพะบะฐะทะฐัั ะฟะพัััะตะปั         โ");
    println!("โ  4. ะััะพัะธั ัะดะตะปะพะบ            โ");
    println!("โ  5. ะััะพะด                     โ");
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ");

    let choice = read_input("\nะัะฑะตัะธัะต ะดะตะนััะฒะธะต (1-5): ");

    match choice.as_str() {
        "1" => println!("ะัะบััะฒะฐะตะผ ะฝะพะฒัั ะฟะพะทะธัะธั..."),
        "2" => println!("ะะฐะบััะฒะฐะตะผ ะฟะพะทะธัะธั..."),
        "3" => println!("ะะฐะณััะถะฐะตะผ ะฟะพัััะตะปั..."),
        "4" => println!("ะะฐะณััะถะฐะตะผ ะธััะพัะธั..."),
        "5" => println!("ะะพ ัะฒะธะดะฐะฝะธั!"),
        _ => println!("ะะตะธะทะฒะตััะฝะฐั ะบะพะผะฐะฝะดะฐ: {}", choice),
    }
}
```

## ะะฒะพะด ะฝะฐะฟัะฐะฒะปะตะฝะธั ัะดะตะปะบะธ

```rust
use std::io::{self, Write};

fn read_input(prompt: &str) -> String {
    print!("{}", prompt);
    io::stdout().flush().unwrap();

    let mut input = String::new();
    io::stdin().read_line(&mut input).expect("ะัะธะฑะบะฐ");
    input.trim().to_string()
}

fn main() {
    println!("=== ะะะะะฏ ะกะะะะะ ===\n");

    let direction = read_input("ะะฐะฟัะฐะฒะปะตะฝะธะต (buy/sell): ");
    let ticker = read_input("ะขะธะบะตั: ");
    let quantity = read_input("ะะพะปะธัะตััะฒะพ: ");

    let direction_upper = direction.to_uppercase();
    let is_buy = direction_upper == "BUY" || direction_upper == "B";

    if is_buy {
        println!("\n๐ข ะะะะฃะะะ {} x {}", quantity, ticker.to_uppercase());
    } else {
        println!("\n๐ด ะะะะะะะ {} x {}", quantity, ticker.to_uppercase());
    }
}
```

## ะฆะธะบะป ะฒะฒะพะดะฐ ะดะพ ะบะพััะตะบัะฝะพะณะพ ะทะฝะฐัะตะฝะธั

```rust
use std::io::{self, Write};

fn read_input(prompt: &str) -> String {
    print!("{}", prompt);
    io::stdout().flush().unwrap();

    let mut input = String::new();
    io::stdin().read_line(&mut input).expect("ะัะธะฑะบะฐ");
    input.trim().to_string()
}

fn main() {
    loop {
        let risk = read_input("ะะธัะบ ะฝะฐ ัะดะตะปะบั (1-5%): ");

        // ะัะพััะฐั ะฟัะพะฒะตัะบะฐ โ ััะพ ัะธัะปะพ ะพั 1 ะดะพ 5
        match risk.as_str() {
            "1" | "2" | "3" | "4" | "5" => {
                println!("ะฃััะฐะฝะพะฒะปะตะฝ ัะธัะบ: {}%", risk);
                break;
            }
            _ => {
                println!("ะัะธะฑะบะฐ! ะะฒะตะดะธัะต ัะธัะปะพ ะพั 1 ะดะพ 5");
            }
        }
    }

    println!("ะะฐัััะพะนะบะฐ ะทะฐะฒะตััะตะฝะฐ.");
}
```

## ะะฝัะตัะฐะบัะธะฒะฝัะน ะผะพะฝะธัะพัะธะฝะณ ะฟะพะทะธัะธะธ

```rust
use std::io::{self, Write};

fn read_input(prompt: &str) -> String {
    print!("{}", prompt);
    io::stdout().flush().unwrap();

    let mut input = String::new();
    io::stdin().read_line(&mut input).expect("ะัะธะฑะบะฐ");
    input.trim().to_string()
}

fn main() {
    let entry_price = 42000.0_f64;
    let position_size = 0.5_f64;

    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ");
    println!("โ  ะะะะะขะะะะะ ะะะะะฆะะ BTC           โ");
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ");
    println!("โ  ะฆะตะฝะฐ ะฒัะพะดะฐ: ${:.2}            โ", entry_price);
    println!("โ  ะะฐะทะผะตั: {} BTC                  โ", position_size);
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ");

    loop {
        let current = read_input("\nะขะตะบััะฐั ัะตะฝะฐ (ะธะปะธ 'exit'): ");

        if current.to_lowercase() == "exit" {
            println!("ะััะพะด ะธะท ะผะพะฝะธัะพัะธะฝะณะฐ.");
            break;
        }

        // ะะพะบะฐ ะฟัะพััะพ ะฒัะฒะพะดะธะผ ะบะฐะบ ัััะพะบั
        // (ะฟะฐััะธะฝะณ ัะธัะปะฐ ะธะทััะธะผ ะฒ ัะปะตะดัััะตะน ะณะปะฐะฒะต)
        println!("ะะฒะตะดัะฝะฝะฐั ัะตะฝะฐ: ${}", current);
        println!("(ะะฐัััั PnL ะฑัะดะตั ะฒ ัะปะตะดัััะตะน ะณะปะฐะฒะต)");
    }
}
```

## ะงัะพ ะฒะฐะถะฝะพ ะฟะพะผะฝะธัั

| ะัะฟะตะบั | ะะฟะธัะฐะฝะธะต |
|--------|----------|
| `String::new()` | ะกะพะทะดะฐัั ะฟััััั ัััะพะบั ะดะปั ะทะฐะฟะธัะธ ะฒะฒะพะดะฐ |
| `mut` | ะะตัะตะผะตะฝะฝะฐั ะดะพะปะถะฝะฐ ะฑััั ะธะทะผะตะฝัะตะผะพะน |
| `&mut` | ะะตัะตะดะฐัะผ ะธะทะผะตะฝัะตะผัั ัััะปะบั ะฒ read_line |
| `trim()` | ะฃะฑะธัะฐะตั `\n` ะฒ ะบะพะฝัะต ัััะพะบะธ |
| `flush()` | ะัะฒะพะดะธั ะฑััะตั print! ะฝะตะผะตะดะปะตะฝะฝะพ |
| `expect()` | ะะฐะฝะธะบัะตั ะตัะปะธ ะฟัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ ััะตะฝะธั |

## ะะฑัะฐะฑะพัะบะฐ Result ะฑะตะท ะฟะฐะฝะธะบะธ

```rust
use std::io::{self, Write};

fn read_input_safe(prompt: &str) -> Result<String, io::Error> {
    print!("{}", prompt);
    io::stdout().flush()?;

    let mut input = String::new();
    io::stdin().read_line(&mut input)?;

    Ok(input.trim().to_string())
}

fn main() {
    match read_input_safe("ะะฒะตะดะธัะต ัะธะบะตั: ") {
        Ok(ticker) => println!("ะขะธะบะตั: {}", ticker),
        Err(e) => println!("ะัะธะฑะบะฐ ะฒะฒะพะดะฐ: {}", e),
    }
}
```

## ะัะฐะบัะธัะตัะบะธะน ะฟัะธะผะตั: ัะพัะผะฐ ะพัะดะตัะฐ

```rust
use std::io::{self, Write};

fn read_input(prompt: &str) -> String {
    print!("{}", prompt);
    io::stdout().flush().unwrap();

    let mut input = String::new();
    io::stdin().read_line(&mut input).expect("ะัะธะฑะบะฐ");
    input.trim().to_string()
}

fn confirm(prompt: &str) -> bool {
    let answer = read_input(prompt);
    answer.to_lowercase() == "y" || answer.to_lowercase() == "yes"
}

fn main() {
    println!("\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ");
    println!("โ       ะคะะะะ ะะะะะะ ะะะะะะ         โ");
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n");

    let order_type = read_input("ะขะธะฟ ะพัะดะตัะฐ (market/limit): ");
    let side = read_input("ะกัะพัะพะฝะฐ (buy/sell): ");
    let ticker = read_input("ะขะธะบะตั: ");
    let quantity = read_input("ะะพะปะธัะตััะฒะพ: ");

    let price = if order_type.to_lowercase() == "limit" {
        read_input("ะะธะผะธัะฝะฐั ัะตะฝะฐ: ")
    } else {
        String::from("market")
    };

    println!("\nโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ");
    println!("         ะะะะะะะฌะขะ ะะะะะ           ");
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ");
    println!("ะขะธะฟ:       {}", order_type.to_uppercase());
    println!("ะกัะพัะพะฝะฐ:   {}", side.to_uppercase());
    println!("ะขะธะบะตั:     {}", ticker.to_uppercase());
    println!("ะะพะป-ะฒะพ:    {}", quantity);
    println!("ะฆะตะฝะฐ:      {}", price);
    println!("โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ\n");

    if confirm("ะะพะดัะฒะตัะดะธัั ะพัะดะตั? (y/n): ") {
        println!("\nโ ะัะดะตั ะพัะฟัะฐะฒะปะตะฝ!");
    } else {
        println!("\nโ ะัะดะตั ะพัะผะตะฝัะฝ.");
    }
}
```

## ะงัะพ ะผั ัะทะฝะฐะปะธ

1. **std::io** โ ะผะพะดัะปั ะดะปั ัะฐะฑะพัั ั ะฒะฒะพะดะพะผ-ะฒัะฒะพะดะพะผ
2. **stdin().read_line()** โ ัะธัะฐะตั ัััะพะบั ะพั ะฟะพะปัะทะพะฒะฐัะตะปั
3. **String::new()** โ ัะพะทะดะฐัั ะฟััััั ะธะทะผะตะฝัะตะผัั ัััะพะบั
4. **trim()** โ ัะฑะธัะฐะตั ะฟัะพะฑะตะปั ะธ ัะธะผะฒะพะป ะฝะพะฒะพะน ัััะพะบะธ
5. **flush()** โ ะฟัะธะฝัะดะธัะตะปัะฝะพ ะฒัะฒะพะดะธั ะฑััะตั print!

## ะะพะผะฐัะฝะตะต ะทะฐะดะฐะฝะธะต

1. ะะฐะฟะธัะธ ะฟัะพะณัะฐะผะผั-ะบะฐะปัะบัะปััะพั ัะฐะทะผะตัะฐ ะฟะพะทะธัะธะธ: ะฟะพะปัะทะพะฒะฐัะตะปั ะฒะฒะพะดะธั ะฑะฐะปะฐะฝั, ัะธัะบ ะฒ ะฟัะพัะตะฝัะฐั ะธ ัะฐัััะพัะฝะธะต ะดะพ ััะพะฟ-ะปะพััะฐ. ะัะพะณัะฐะผะผะฐ ะฒัะฒะพะดะธั ัะฐะทะผะตั ะฟะพะทะธัะธะธ (ะฟะพะบะฐ ะบะฐะบ ัััะพะบั).

2. ะกะพะทะดะฐะน ะธะฝัะตัะฐะบัะธะฒะฝะพะต ะผะตะฝั ัะพัะณะพะฒะพะณะพ ะฑะพัะฐ ั ะฟัััั ะพะฟัะธัะผะธ ะธ ะพะฑัะฐะฑะพัะบะพะน ะฝะตะฒะตัะฝะพะณะพ ะฒะฒะพะดะฐ.

3. ะะตะฐะปะธะทัะน ัะพัะผั ะดะปั ะฒะฒะพะดะฐ ะฟะฐัะฐะผะตััะพะฒ ะพัะดะตัะฐ (ัะธะบะตั, ะบะพะปะธัะตััะฒะพ, ัะตะฝะฐ, ััะพะฟ-ะปะพัั, ัะตะนะบ-ะฟัะพัะธั) ั ะบัะฐัะธะฒัะผ ะฒัะฒะพะดะพะผ.

4. ะกะดะตะปะฐะน ะฟัะพะณัะฐะผะผั-quiz: ะทะฐะดะฐะน ะฟะพะปัะทะพะฒะฐัะตะปั 5 ะฒะพะฟัะพัะพะฒ ะพ ััะตะนะดะธะฝะณะต ะธ ะฟะพะดััะธัะฐะน ะฟัะฐะฒะธะปัะฝัะต ะพัะฒะตัั.

## ะะฐะฒะธะณะฐัะธั

[โ ะัะตะดัะดััะธะน ะดะตะฝั](../027-shadowing-price-update/ru.md) | [ะกะปะตะดัััะธะน ะดะตะฝั โ](../029-string-parsing/ru.md)
