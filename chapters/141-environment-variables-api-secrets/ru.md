# –î–µ–Ω—å 141: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚Äî —Å–µ–∫—Ä–µ—Ç—ã API

## –ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ —Ç—Ä–µ–π–¥–∏–Ω–≥–∞

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å —Å–µ–π—Ñ –≤ –±–∞–Ω–∫–µ. –¢—ã –Ω–µ –Ω–æ—Å–∏—à—å –∫–ª—é—á –æ—Ç —Å–µ–π—Ñ–∞ –Ω–∞ –≤–∏–¥—É ‚Äî —Ç—ã —Ö—Ä–∞–Ω–∏—à—å –µ–≥–æ –≤ –Ω–∞–¥—ë–∂–Ω–æ–º –º–µ—Å—Ç–µ. API-–∫–ª—é—á–∏ –æ—Ç –±–∏—Ä–∂ (Binance, Bybit, Coinbase) ‚Äî —ç—Ç–æ —Ç–≤–æ–∏ "–∫–ª—é—á–∏ –æ—Ç —Å–µ–π—Ñ–∞" —Å –¥–µ–Ω—å–≥–∞–º–∏. –•—Ä–∞–Ω–∏—Ç—å –∏—Ö –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ ‚Äî –≤—Å—ë —Ä–∞–≤–Ω–æ —á—Ç–æ –Ω–∞–ø–∏—Å–∞—Ç—å –ø–∞—Ä–æ–ª—å –Ω–∞ —Å—Ç–∏–∫–µ—Ä–µ –∏ –ø—Ä–∏–∫–ª–µ–∏—Ç—å –Ω–∞ –º–æ–Ω–∏—Ç–æ—Ä.

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** ‚Äî —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤: –∫–ª—é—á–µ–π API, –ø–∞—Ä–æ–ª–µ–π, —Ç–æ–∫–µ–Ω–æ–≤. –û–Ω–∏ –∂–∏–≤—É—Ç –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –∞ –Ω–µ –≤ –∫–æ–¥–µ.

## –ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ

```rust
// ‚ùå –ù–ò–ö–û–ì–î–ê –¢–ê–ö –ù–ï –î–ï–õ–ê–ô!
const API_KEY: &str = "sk-abc123xyz789";
const API_SECRET: &str = "super-secret-key";

fn main() {
    // –ï—Å–ª–∏ —Ç—ã –∑–∞–≥—Ä—É–∑–∏—à—å —ç—Ç–æ—Ç –∫–æ–¥ –Ω–∞ GitHub ‚Äî
    // –±–æ—Ç—ã –Ω–∞–π–¥—É—Ç –∫–ª—é—á–∏ –∑–∞ —Å–µ–∫—É–Ω–¥—ã –∏ –æ–ø—É—Å—Ç–æ—à–∞—Ç —Å—á—ë—Ç!
}
```

**–†–µ–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏:**
- –¢—Ä–µ–π–¥–µ—Ä –ø–æ—Ç–µ—Ä—è–ª $50,000 –∑–∞ 2 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ API-–∫–ª—é—á–µ–π
- –ë–æ—Ç—ã —Å–∫–∞–Ω–∏—Ä—É—é—Ç GitHub 24/7 –≤ –ø–æ–∏—Å–∫–∞—Ö –∫–ª—é—á–µ–π –æ—Ç –±–∏—Ä–∂
- –£—Ç–µ—á–∫–∞ –∫–ª—é—á–µ–π = –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ç–≤–æ–µ–º—É —Å—á—ë—Ç—É

## –ß—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ë–∞–∑–æ–≤—ã–π —Å–ø–æ—Å–æ–±: std::env

```rust
use std::env;

fn main() {
    // –ü–æ–ª—É—á–∞–µ–º –∫–ª—é—á API –±–∏—Ä–∂–∏
    match env::var("BINANCE_API_KEY") {
        Ok(key) => println!("API Key –∑–∞–≥—Ä—É–∂–µ–Ω: {}...", &key[..8]),
        Err(_) => println!("BINANCE_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"),
    }
}
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è

```rust
use std::env;

fn main() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞
    let required_vars = [
        "EXCHANGE_API_KEY",
        "EXCHANGE_API_SECRET",
        "TELEGRAM_BOT_TOKEN",
    ];

    let mut missing = Vec::new();

    for var in &required_vars {
        if env::var(var).is_err() {
            missing.push(*var);
        }
    }

    if !missing.is_empty() {
        println!("–û—à–∏–±–∫–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:");
        for var in &missing {
            println!("  - {}", var);
        }
        std::process::exit(1);
    }

    println!("–í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.");
}
```

### –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```rust
use std::env;

fn main() {
    // –î–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    let trading_mode = env::var("TRADING_MODE")
        .unwrap_or_else(|_| String::from("paper")); // paper trading –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

    let max_position_size: f64 = env::var("MAX_POSITION_SIZE")
        .unwrap_or_else(|_| String::from("1000.0"))
        .parse()
        .unwrap_or(1000.0);

    let log_level = env::var("LOG_LEVEL")
        .unwrap_or_else(|_| String::from("info"));

    println!("–†–µ–∂–∏–º: {}", trading_mode);
    println!("–ú–∞–∫—Å. –ø–æ–∑–∏—Ü–∏—è: ${}", max_position_size);
    println!("–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–æ–≤: {}", log_level);
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞

```rust
use std::env;

struct ExchangeConfig {
    api_key: String,
    api_secret: String,
    testnet: bool,
}

struct TradingConfig {
    max_position_usd: f64,
    risk_per_trade_percent: f64,
    allowed_symbols: Vec<String>,
}

struct BotConfig {
    exchange: ExchangeConfig,
    trading: TradingConfig,
    telegram_token: Option<String>,
}

impl BotConfig {
    fn from_env() -> Result<Self, String> {
        // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let api_key = env::var("EXCHANGE_API_KEY")
            .map_err(|_| "EXCHANGE_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")?;

        let api_secret = env::var("EXCHANGE_API_SECRET")
            .map_err(|_| "EXCHANGE_API_SECRET –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")?;

        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å –¥–µ—Ñ–æ–ª—Ç–∞–º–∏
        let testnet = env::var("USE_TESTNET")
            .map(|v| v == "true" || v == "1")
            .unwrap_or(true); // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Ç–µ—Å—Ç–æ–≤–∞—è —Å–µ—Ç—å!

        let max_position_usd: f64 = env::var("MAX_POSITION_USD")
            .unwrap_or_else(|_| String::from("100.0"))
            .parse()
            .map_err(|_| "MAX_POSITION_USD –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º")?;

        let risk_per_trade: f64 = env::var("RISK_PER_TRADE_PERCENT")
            .unwrap_or_else(|_| String::from("1.0"))
            .parse()
            .map_err(|_| "RISK_PER_TRADE_PERCENT –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º")?;

        // –ü–∞—Ä—Å–∏–º —Å–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
        let symbols_str = env::var("ALLOWED_SYMBOLS")
            .unwrap_or_else(|_| String::from("BTCUSDT,ETHUSDT"));
        let allowed_symbols: Vec<String> = symbols_str
            .split(',')
            .map(|s| s.trim().to_string())
            .collect();

        // –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
        let telegram_token = env::var("TELEGRAM_BOT_TOKEN").ok();

        Ok(BotConfig {
            exchange: ExchangeConfig {
                api_key,
                api_secret,
                testnet,
            },
            trading: TradingConfig {
                max_position_usd,
                risk_per_trade_percent: risk_per_trade,
                allowed_symbols,
            },
            telegram_token,
        })
    }
}

fn main() {
    match BotConfig::from_env() {
        Ok(config) => {
            println!("–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞:");
            println!("  API Key: {}...", &config.exchange.api_key[..8.min(config.exchange.api_key.len())]);
            println!("  Testnet: {}", config.exchange.testnet);
            println!("  –ú–∞–∫—Å. –ø–æ–∑–∏—Ü–∏—è: ${}", config.trading.max_position_usd);
            println!("  –†–∏—Å–∫ –Ω–∞ —Å–¥–µ–ª–∫—É: {}%", config.trading.risk_per_trade_percent);
            println!("  –°–∏–º–≤–æ–ª—ã: {:?}", config.trading.allowed_symbols);
            println!("  Telegram: {}", if config.telegram_token.is_some() { "–Ω–∞—Å—Ç—Ä–æ–µ–Ω" } else { "–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω" });
        }
        Err(e) => {
            eprintln!("–û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: {}", e);
            std::process::exit(1);
        }
    }
}
```

## –§–∞–π–ª .env –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ dotenv

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —á–∞—Å—Ç–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.env`:

```bash
# .env —Ñ–∞–π–ª (–ù–ï –ö–û–ú–ú–ò–¢–ò–¢–¨ –í GIT!)
EXCHANGE_API_KEY=your-api-key-here
EXCHANGE_API_SECRET=your-secret-here
USE_TESTNET=true
MAX_POSITION_USD=500.0
RISK_PER_TRADE_PERCENT=2.0
ALLOWED_SYMBOLS=BTCUSDT,ETHUSDT,SOLUSDT
```

```rust
// –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è .env —Ñ–∞–π–ª–∞ –¥–æ–±–∞–≤—å –≤ Cargo.toml:
// [dependencies]
// dotenv = "0.15"

use std::env;

fn load_dotenv() {
    // –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ .env –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    if let Ok(contents) = std::fs::read_to_string(".env") {
        for line in contents.lines() {
            let line = line.trim();

            // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
            if line.is_empty() || line.starts_with('#') {
                continue;
            }

            // –†–∞–∑–±–∏—Ä–∞–µ–º KEY=VALUE
            if let Some(pos) = line.find('=') {
                let key = line[..pos].trim();
                let value = line[pos + 1..].trim();

                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –µ—Å–ª–∏ –æ–Ω–∞ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
                if env::var(key).is_err() {
                    env::set_var(key, value);
                }
            }
        }
    }
}

fn main() {
    load_dotenv();

    // –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env
    if let Ok(key) = env::var("EXCHANGE_API_KEY") {
        println!("–ö–ª—é—á –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ .env");
    }
}
```

## –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ª–æ–≥–∞—Ö

```rust
use std::env;

/// –ú–∞—Å–∫–∏—Ä—É–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–æ–∫—É, –ø–æ–∫–∞–∑—ã–≤–∞—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã
fn mask_secret(secret: &str, visible_chars: usize) -> String {
    if secret.len() <= visible_chars * 2 {
        return "*".repeat(secret.len());
    }

    let start = &secret[..visible_chars];
    let end = &secret[secret.len() - visible_chars..];
    let middle = "*".repeat(secret.len() - visible_chars * 2);

    format!("{}{}{}", start, middle, end)
}

/// –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–≤–æ–¥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ API
fn log_api_config(api_key: &str, api_secret: &str) {
    println!("API Configuration:");
    println!("  Key:    {}", mask_secret(api_key, 4));
    println!("  Secret: {}", mask_secret(api_secret, 2));
}

fn main() {
    let api_key = env::var("API_KEY")
        .unwrap_or_else(|_| String::from("test-key-12345678"));
    let api_secret = env::var("API_SECRET")
        .unwrap_or_else(|_| String::from("super-secret-password-123"));

    log_api_config(&api_key, &api_secret);

    // –ü—Ä–∏–º–µ—Ä—ã –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è
    println!("\n–ü—Ä–∏–º–µ—Ä—ã –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è:");
    println!("  'abcdefghij' -> '{}'", mask_secret("abcdefghij", 2));
    println!("  'short' -> '{}'", mask_secret("short", 2));
}
```

## –í–∞–ª–∏–¥–∞—Ü–∏—è API-–∫–ª—é—á–µ–π

```rust
use std::env;

#[derive(Debug)]
enum ApiKeyError {
    Missing(String),
    TooShort { key_name: String, min_length: usize },
    InvalidFormat(String),
}

fn validate_binance_key(key: &str) -> Result<(), ApiKeyError> {
    // Binance API –∫–ª—é—á–∏ –æ–±—ã—á–Ω–æ 64 —Å–∏–º–≤–æ–ª–∞
    if key.len() < 64 {
        return Err(ApiKeyError::TooShort {
            key_name: String::from("BINANCE_API_KEY"),
            min_length: 64,
        });
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–ª—é—á —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã
    if !key.chars().all(|c| c.is_ascii_alphanumeric()) {
        return Err(ApiKeyError::InvalidFormat(
            String::from("–ö–ª—é—á –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã")
        ));
    }

    Ok(())
}

fn load_and_validate_api_keys() -> Result<(String, String), ApiKeyError> {
    let api_key = env::var("BINANCE_API_KEY")
        .map_err(|_| ApiKeyError::Missing(String::from("BINANCE_API_KEY")))?;

    let api_secret = env::var("BINANCE_API_SECRET")
        .map_err(|_| ApiKeyError::Missing(String::from("BINANCE_API_SECRET")))?;

    validate_binance_key(&api_key)?;
    validate_binance_key(&api_secret)?;

    Ok((api_key, api_secret))
}

fn main() {
    match load_and_validate_api_keys() {
        Ok((key, secret)) => {
            println!("API –∫–ª—é—á–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏ –ø—Ä–æ–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã");
            println!("Key length: {}, Secret length: {}", key.len(), secret.len());
        }
        Err(ApiKeyError::Missing(name)) => {
            eprintln!("–û—à–∏–±–∫–∞: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è {} –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞", name);
        }
        Err(ApiKeyError::TooShort { key_name, min_length }) => {
            eprintln!("–û—à–∏–±–∫–∞: {} —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π (–º–∏–Ω. {} —Å–∏–º–≤–æ–ª–æ–≤)", key_name, min_length);
        }
        Err(ApiKeyError::InvalidFormat(msg)) => {
            eprintln!("–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞: {}", msg);
        }
    }
}
```

## –†–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏

```rust
use std::env;

#[derive(Debug, Clone, Copy, PartialEq)]
enum Environment {
    Development,
    Staging,
    Production,
}

impl Environment {
    fn from_env() -> Self {
        match env::var("RUST_ENV").as_deref() {
            Ok("production") | Ok("prod") => Environment::Production,
            Ok("staging") | Ok("stage") => Environment::Staging,
            _ => Environment::Development,
        }
    }

    fn is_production(&self) -> bool {
        matches!(self, Environment::Production)
    }

    fn api_base_url(&self) -> &'static str {
        match self {
            Environment::Development => "https://testnet.binance.vision",
            Environment::Staging => "https://testnet.binance.vision",
            Environment::Production => "https://api.binance.com",
        }
    }

    fn default_max_position(&self) -> f64 {
        match self {
            Environment::Development => 100.0,    // $100 –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
            Environment::Staging => 1000.0,       // $1000 –¥–ª—è —Å—Ç–µ–π–¥–∂–∏–Ω–≥–∞
            Environment::Production => 10000.0,   // $10000 –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
        }
    }
}

fn main() {
    let env = Environment::from_env();

    println!("–¢–µ–∫—É—â–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ: {:?}", env);
    println!("API URL: {}", env.api_base_url());
    println!("–ú–∞–∫—Å. –ø–æ–∑–∏—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: ${}", env.default_max_position());

    if env.is_production() {
        println!("\n‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –†–∞–±–æ—Ç–∞ –≤ PRODUCTION —Ä–µ–∂–∏–º–µ!");
        println!("    –í—Å–µ —Å–¥–µ–ª–∫–∏ –±—É–¥—É—Ç —Ä–µ–∞–ª—å–Ω—ã–º–∏!");
    }
}
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞

```rust
use std::env;
use std::collections::HashMap;

#[derive(Debug)]
struct TradingBotConfig {
    // –ë–∏—Ä–∂–∞
    exchange_name: String,
    api_key: String,
    api_secret: String,
    is_testnet: bool,

    // –¢–æ—Ä–≥–æ–≤–ª—è
    symbols: Vec<String>,
    max_position_usd: f64,
    max_daily_trades: u32,
    risk_percent: f64,

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    telegram_chat_id: Option<String>,
    telegram_bot_token: Option<String>,

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    extra: HashMap<String, String>,
}

impl TradingBotConfig {
    fn from_env() -> Result<Self, String> {
        // –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
        let exchange_name = env::var("EXCHANGE")
            .unwrap_or_else(|_| String::from("binance"));

        let api_key = env::var("API_KEY")
            .map_err(|_| "API_KEY is required")?;

        let api_secret = env::var("API_SECRET")
            .map_err(|_| "API_SECRET is required")?;

        // –° –¥–µ—Ñ–æ–ª—Ç–∞–º–∏
        let is_testnet = env::var("TESTNET")
            .map(|v| v == "true" || v == "1" || v == "yes")
            .unwrap_or(true);

        let symbols: Vec<String> = env::var("TRADING_SYMBOLS")
            .unwrap_or_else(|_| String::from("BTCUSDT"))
            .split(',')
            .map(|s| s.trim().to_uppercase())
            .filter(|s| !s.is_empty())
            .collect();

        let max_position_usd: f64 = env::var("MAX_POSITION_USD")
            .unwrap_or_else(|_| String::from("100"))
            .parse()
            .unwrap_or(100.0);

        let max_daily_trades: u32 = env::var("MAX_DAILY_TRADES")
            .unwrap_or_else(|_| String::from("10"))
            .parse()
            .unwrap_or(10);

        let risk_percent: f64 = env::var("RISK_PERCENT")
            .unwrap_or_else(|_| String::from("1.0"))
            .parse()
            .unwrap_or(1.0)
            .min(5.0); // –ù–µ –±–æ–ª–µ–µ 5% —Ä–∏—Å–∫–∞

        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
        let telegram_chat_id = env::var("TELEGRAM_CHAT_ID").ok();
        let telegram_bot_token = env::var("TELEGRAM_BOT_TOKEN").ok();

        // –°–æ–±–∏—Ä–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º BOT_
        let extra: HashMap<String, String> = env::vars()
            .filter(|(k, _)| k.starts_with("BOT_"))
            .map(|(k, v)| (k.strip_prefix("BOT_").unwrap().to_string(), v))
            .collect();

        Ok(TradingBotConfig {
            exchange_name,
            api_key,
            api_secret,
            is_testnet,
            symbols,
            max_position_usd,
            max_daily_trades,
            risk_percent,
            telegram_chat_id,
            telegram_bot_token,
            extra,
        })
    }

    fn print_summary(&self) {
        println!("‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó");
        println!("‚ïë         TRADING BOT CONFIGURATION         ‚ïë");
        println!("‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£");
        println!("‚ïë Exchange:     {:>27} ‚ïë", self.exchange_name);
        println!("‚ïë Mode:         {:>27} ‚ïë", if self.is_testnet { "TESTNET" } else { "PRODUCTION" });
        println!("‚ïë API Key:      {:>27} ‚ïë", format!("{}...", &self.api_key[..8.min(self.api_key.len())]));
        println!("‚ïë Symbols:      {:>27} ‚ïë", self.symbols.join(", "));
        println!("‚ïë Max Position: {:>26}$ ‚ïë", self.max_position_usd);
        println!("‚ïë Max Trades:   {:>27} ‚ïë", self.max_daily_trades);
        println!("‚ïë Risk:         {:>26}% ‚ïë", self.risk_percent);
        println!("‚ïë Telegram:     {:>27} ‚ïë",
            if self.telegram_bot_token.is_some() { "Enabled" } else { "Disabled" });
        println!("‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù");

        if !self.extra.is_empty() {
            println!("\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:");
            for (key, value) in &self.extra {
                println!("  {}: {}", key, value);
            }
        }
    }
}

fn main() {
    println!("–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...\n");

    match TradingBotConfig::from_env() {
        Ok(config) => {
            config.print_summary();

            if !config.is_testnet {
                println!("\nüö® –í–ù–ò–ú–ê–ù–ò–ï: PRODUCTION MODE! üö®");
                println!("–í—Å–µ —Å–¥–µ–ª–∫–∏ –±—É–¥—É—Ç –†–ï–ê–õ–¨–ù–´–ú–ò!");
            }
        }
        Err(e) => {
            eprintln!("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: {}", e);
            eprintln!("\n–ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:");
            eprintln!("  export API_KEY=\"your-api-key\"");
            eprintln!("  export API_SECRET=\"your-api-secret\"");
            eprintln!("  export TESTNET=true");
            std::process::exit(1);
        }
    }
}
```

## –ß—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏

| –ö–æ–Ω—Ü–µ–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-----------|----------|--------|
| `env::var()` | –ß—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π | `env::var("API_KEY")` |
| `unwrap_or_else` | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | `var.unwrap_or_else(\|_\| default)` |
| `.env` —Ñ–∞–π–ª | –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ | –î–æ–±–∞–≤—å –≤ `.gitignore`! |
| –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ | –°–∫—Ä—ã—Ç–∏–µ –≤ –ª–æ–≥–∞—Ö | `key[..4] + "***"` |
| –í–∞–ª–∏–¥–∞—Ü–∏—è | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ | –î–ª–∏–Ω–∞, —Å–∏–º–≤–æ–ª—ã, —Ñ–æ—Ä–º–∞—Ç |

## –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∫–æ–º–º–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ Git
2. –î–æ–±–∞–≤—å `.env` –≤ `.gitignore`
3. –ò—Å–ø–æ–ª—å–∑—É–π —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è dev/prod
4. –ú–∞—Å–∫–∏—Ä—É–π —Å–µ–∫—Ä–µ—Ç—ã –≤ –ª–æ–≥–∞—Ö
5. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî testnet —Ä–µ–∂–∏–º

## –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ

1. –ù–∞–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é `load_multi_exchange_config()`, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–∏—Ä–∂ (Binance, Bybit, Coinbase) –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏

2. –°–æ–∑–¥–∞–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä API-–∫–ª—é—á–µ–π, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–µ–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±–∏—Ä–∂ (—É –∫–∞–∂–¥–æ–π —Å–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞)

3. –†–µ–∞–ª–∏–∑—É–π —Å–∏—Å—Ç–µ–º—É "—Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞" —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º: –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ, –∏ –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –Ω—É–∂–µ–Ω –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è

4. –ù–∞–ø–∏—à–∏ —É—Ç–∏–ª–∏—Ç—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä–∞—è —Å–∫–∞–Ω–∏—Ä—É–µ—Ç `.rs` —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∏, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ API-–∫–ª—é—á–∏)

## –ù–∞–≤–∏–≥–∞—Ü–∏—è

[‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å](../140-file-output-trade-exports/ru.md) | [–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å ‚Üí](../142-file-reading-historical-data/ru.md)
