# –î–µ–Ω—å 286: –ú–µ—Ç—Ä–∏–∫–∏: Profit Factor

## –ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ —Ç—Ä–µ–π–¥–∏–Ω–≥–∞

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç–µ —Å–≤–æ–π —Ç–æ—Ä–≥–æ–≤—ã–π –¥–Ω–µ–≤–Ω–∏–∫ –∑–∞ –≥–æ–¥. –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ –≤ 60 —Å–¥–µ–ª–∫–∞—Ö, –∑–∞—Ä–∞–±–æ—Ç–∞–≤ –≤ —Å—É–º–º–µ $15,000. –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ –≤ 40 —Å–¥–µ–ª–∫–∞—Ö, –ø–æ—Ç–µ—Ä—è–≤ –≤ —Å—É–º–º–µ $5,000. –ö–∞–∫ –æ—Ü–µ–Ω–∏—Ç—å —Å–≤–æ—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å? –û–¥–Ω–∞ –∏–∑ –ø—Ä–æ—Å—Ç—ã—Ö –º–µ—Ç—Ä–∏–∫, –∫–æ—Ç–æ—Ä—É—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç—Ä–µ–π–¥–µ—Ä—ã ‚Äî —ç—Ç–æ **Profit Factor** (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏) ‚Äî –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –¥–æ–ª–ª–∞—Ä–æ–≤ –≤—ã –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ –Ω–∞ –∫–∞–∂–¥—ã–π –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–π –¥–æ–ª–ª–∞—Ä.

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ:
- –û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å: $15,000
- –û–±—â–∏–µ —É–±—ã—Ç–∫–∏: $5,000
- Profit Factor = $15,000 / $5,000 = 3.0

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞ –∫–∞–∂–¥—ã–π –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–π –¥–æ–ª–ª–∞—Ä –≤—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ —Ç—Ä–∏ –¥–æ–ª–ª–∞—Ä–∞! Profit Factor –≤—ã—à–µ 1.0 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –ø—Ä–∏–±—ã–ª—å–Ω—ã. –ß–µ–º –≤—ã—à–µ —á–∏—Å–ª–æ, —Ç–µ–º –ª—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∞—à–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è ‚Äî –Ω–æ –æ—Å—Ç–µ—Ä–µ–≥–∞–π—Ç–µ—Å—å –Ω–µ—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ –≤—ã—Å–æ–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–≤—ã—à–µ 4.0), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –ø—Ä–∏ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–µ.

## –ß—Ç–æ —Ç–∞–∫–æ–µ Profit Factor?

**Profit Factor** ‚Äî –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –ø—Ä–∏ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: "–°–∫–æ–ª—å–∫–æ –ø—Ä–∏–±—ã–ª–∏ —è –ø–æ–ª—É—á–∞—é –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–≤–æ–∏—Ö —É–±—ã—Ç–∫–æ–≤?"

### –§–æ—Ä–º—É–ª–∞

```
Profit Factor = –û–±—â–∞—è –≤–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å / –û–±—â–∏–µ –≤–∞–ª–æ–≤—ã–µ —É–±—ã—Ç–∫–∏
```

–ì–¥–µ:
- **–û–±—â–∞—è –≤–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å** = –°—É–º–º–∞ –≤—Å–µ—Ö –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
- **–û–±—â–∏–µ –≤–∞–ª–æ–≤—ã–µ —É–±—ã—Ç–∫–∏** = –°—É–º–º–∞ –≤—Å–µ—Ö —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ (–ø–æ –º–æ–¥—É–ª—é)

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è

| Profit Factor | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------------|----------|
| < 1.0 | –£–±—ã—Ç–æ—á–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (—É–±—ã—Ç–∫–∏ –ø—Ä–µ–≤—ã—à–∞—é—Ç –ø—Ä–∏–±—ã–ª—å) |
| = 1.0 | –ë–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å (–ø—Ä–∏–±—ã–ª—å —Ä–∞–≤–Ω–∞ —É–±—ã—Ç–∫–∞–º) |
| 1.0 - 1.5 | –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–±—ã–ª—å–Ω–∞—è |
| 1.5 - 2.5 | –•–æ—Ä–æ—à–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
| 2.5 - 4.0 | –û—Ç–ª–∏—á–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
| > 4.0 | –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–æ–∫–æ–µ (–≤–æ–∑–º–æ–∂–Ω–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ) |

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä: —Ä–∞—Å—á—ë—Ç Profit Factor

```rust
fn main() {
    // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–æ—Ä–≥–æ–≤–ª–∏ –∑–∞ –º–µ—Å—è—Ü
    let winning_trades = vec![150.0, 200.0, 300.0, 120.0, 180.0];
    let losing_trades = vec![-80.0, -100.0, -60.0, -90.0];

    // –í—ã—á–∏—Å–ª—è–µ–º –æ–±—â—É—é –≤–∞–ª–æ–≤—É—é –ø—Ä–∏–±—ã–ª—å
    let total_profit: f64 = winning_trades.iter().sum();

    // –í—ã—á–∏—Å–ª—è–µ–º –æ–±—â–∏–µ –≤–∞–ª–æ–≤—ã–µ —É–±—ã—Ç–∫–∏ (–ø–æ –º–æ–¥—É–ª—é)
    let total_loss: f64 = losing_trades.iter()
        .map(|&x: &f64| x.abs())
        .sum();

    // –í—ã—á–∏—Å–ª—è–µ–º Profit Factor
    let profit_factor = total_profit / total_loss;

    println!("–û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å: ${:.2}", total_profit);
    println!("–û–±—â–∏–µ —É–±—ã—Ç–∫–∏: ${:.2}", total_loss);
    println!("Profit Factor: {:.2}", profit_factor);

    // –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
    if profit_factor < 1.0 {
        println!("–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Ä—è–µ—Ç –¥–µ–Ω—å–≥–∏!");
    } else if profit_factor >= 1.5 {
        println!("–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ!");
    } else {
        println!("–°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–±—ã–ª—å–Ω–∞.");
    }
}
```

–í—ã–≤–æ–¥:
```
–û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å: $950.00
–û–±—â–∏–µ —É–±—ã—Ç–∫–∏: $330.00
Profit Factor: 2.88
–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ!
```

## –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–¥–µ–ª–∫–∏

–ü–æ—Å—Ç—Ä–æ–∏–º –±–æ–ª–µ–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Å–¥–µ–ª–∫–∞–º–∏:

```rust
#[derive(Debug, Clone)]
struct Trade {
    symbol: String,
    entry_price: f64,
    exit_price: f64,
    quantity: f64,
    trade_type: TradeType,
}

#[derive(Debug, Clone, Copy)]
enum TradeType {
    Long,  // –î–ª–∏–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (–ø–æ–∫—É–ø–∫–∞)
    Short, // –ö–æ—Ä–æ—Ç–∫–∞—è –ø–æ–∑–∏—Ü–∏—è (–ø—Ä–æ–¥–∞–∂–∞)
}

impl Trade {
    fn new(symbol: &str, entry_price: f64, exit_price: f64, quantity: f64, trade_type: TradeType) -> Self {
        Trade {
            symbol: symbol.to_string(),
            entry_price,
            exit_price,
            quantity,
            trade_type,
        }
    }

    // –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫ –¥–ª—è —ç—Ç–æ–π —Å–¥–µ–ª–∫–∏
    fn pnl(&self) -> f64 {
        match self.trade_type {
            TradeType::Long => (self.exit_price - self.entry_price) * self.quantity,
            TradeType::Short => (self.entry_price - self.exit_price) * self.quantity,
        }
    }

    fn is_winner(&self) -> bool {
        self.pnl() > 0.0
    }
}

fn main() {
    let trades = vec![
        Trade::new("BTC", 40000.0, 42000.0, 1.0, TradeType::Long),   // +2000
        Trade::new("ETH", 2500.0, 2400.0, 10.0, TradeType::Long),    // -1000
        Trade::new("BTC", 41000.0, 43000.0, 0.5, TradeType::Long),   // +1000
        Trade::new("SOL", 100.0, 95.0, 20.0, TradeType::Long),       // -100
        Trade::new("BTC", 44000.0, 42000.0, 1.5, TradeType::Short),  // +3000
    ];

    let total_profit: f64 = trades.iter()
        .filter(|t| t.is_winner())
        .map(|t| t.pnl())
        .sum();

    let total_loss: f64 = trades.iter()
        .filter(|t| !t.is_winner())
        .map(|t| t.pnl().abs())
        .sum();

    let profit_factor = if total_loss > 0.0 {
        total_profit / total_loss
    } else {
        f64::INFINITY // –í—Å–µ —Å–¥–µ–ª–∫–∏ –±—ã–ª–∏ –ø—Ä–∏–±—ã–ª—å–Ω—ã–º–∏!
    };

    println!("–û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å: ${:.2}", total_profit);
    println!("–û–±—â–∏–µ —É–±—ã—Ç–∫–∏: ${:.2}", total_loss);
    println!("Profit Factor: {:.2}", profit_factor);
    println!("\n–†–∞–∑–±–∏–≤–∫–∞ –ø–æ —Å–¥–µ–ª–∫–∞–º:");
    for (i, trade) in trades.iter().enumerate() {
        println!("  –°–¥–µ–ª–∫–∞ {}: {} {:?} - PnL: ${:.2}",
            i + 1,
            trade.symbol,
            trade.trade_type,
            trade.pnl()
        );
    }
}
```

## –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞

–°–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç—É—é —Å–∏—Å—Ç–µ–º—É –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—ã—á–∏—Å–ª—è–µ—Ç Profit Factor:

```rust
use std::collections::HashMap;

#[derive(Debug, Clone)]
struct BacktestResult {
    trades: Vec<Trade>,
    metrics: HashMap<String, f64>,
}

impl BacktestResult {
    fn new(trades: Vec<Trade>) -> Self {
        let mut result = BacktestResult {
            trades,
            metrics: HashMap::new(),
        };
        result.calculate_metrics();
        result
    }

    fn calculate_metrics(&mut self) {
        let total_profit: f64 = self.trades.iter()
            .filter(|t| t.is_winner())
            .map(|t| t.pnl())
            .sum();

        let total_loss: f64 = self.trades.iter()
            .filter(|t| !t.is_winner())
            .map(|t| t.pnl().abs())
            .sum();

        let profit_factor = if total_loss > 0.0 {
            total_profit / total_loss
        } else {
            f64::INFINITY
        };

        let win_count = self.trades.iter().filter(|t| t.is_winner()).count();
        let total_count = self.trades.len();
        let win_rate = win_count as f64 / total_count as f64;

        let net_profit = total_profit - total_loss;

        self.metrics.insert("total_profit".to_string(), total_profit);
        self.metrics.insert("total_loss".to_string(), total_loss);
        self.metrics.insert("profit_factor".to_string(), profit_factor);
        self.metrics.insert("win_rate".to_string(), win_rate);
        self.metrics.insert("net_profit".to_string(), net_profit);
        self.metrics.insert("total_trades".to_string(), total_count as f64);
    }

    fn print_report(&self) {
        println!("=== –û—Ç—á—ë—Ç –ø–æ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥—É ===");
        println!("–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫: {:.0}", self.metrics.get("total_trades").unwrap_or(&0.0));
        println!("–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥: {:.2}%", self.metrics.get("win_rate").unwrap_or(&0.0) * 100.0);
        println!("–û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å: ${:.2}", self.metrics.get("total_profit").unwrap_or(&0.0));
        println!("–û–±—â–∏–µ —É–±—ã—Ç–∫–∏: ${:.2}", self.metrics.get("total_loss").unwrap_or(&0.0));
        println!("–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å: ${:.2}", self.metrics.get("net_profit").unwrap_or(&0.0));
        println!("Profit Factor: {:.2}", self.metrics.get("profit_factor").unwrap_or(&0.0));

        let pf = self.metrics.get("profit_factor").unwrap_or(&0.0);
        println!("\n–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:");
        if *pf < 1.0 {
            println!("  ‚ö†Ô∏è  –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Ä—è–µ—Ç –¥–µ–Ω—å–≥–∏!");
        } else if *pf < 1.5 {
            println!("  ‚ö° –°—Ç—Ä–∞—Ç–µ–≥–∏—è –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–±—ã–ª—å–Ω–∞.");
        } else if *pf < 2.5 {
            println!("  ‚úÖ –•–æ—Ä–æ—à–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!");
        } else if *pf <= 4.0 {
            println!("  üéØ –û—Ç–ª–∏—á–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!");
        } else {
            println!("  ‚ö†Ô∏è  –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–æ–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ!");
        }
    }
}

fn main() {
    // –°–∏–º—É–ª–∏—Ä—É–µ–º —Ç–æ—Ä–≥–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
    let trades = vec![
        Trade::new("BTC", 40000.0, 42000.0, 1.0, TradeType::Long),
        Trade::new("ETH", 2500.0, 2400.0, 10.0, TradeType::Long),
        Trade::new("BTC", 41000.0, 43000.0, 0.5, TradeType::Long),
        Trade::new("SOL", 100.0, 95.0, 20.0, TradeType::Long),
        Trade::new("BTC", 44000.0, 42000.0, 1.5, TradeType::Short),
        Trade::new("ETH", 2600.0, 2800.0, 5.0, TradeType::Long),
        Trade::new("BTC", 43000.0, 41000.0, 2.0, TradeType::Short),
    ];

    let result = BacktestResult::new(trades);
    result.print_report();
}
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

–°—Ä–∞–≤–Ω–∏–º –¥–≤–µ —Ä–∞–∑–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—è Profit Factor:

```rust
struct Strategy {
    name: String,
    trades: Vec<Trade>,
}

impl Strategy {
    fn new(name: &str) -> Self {
        Strategy {
            name: name.to_string(),
            trades: Vec::new(),
        }
    }

    fn add_trade(&mut self, trade: Trade) {
        self.trades.push(trade);
    }

    fn calculate_profit_factor(&self) -> f64 {
        let total_profit: f64 = self.trades.iter()
            .filter(|t| t.is_winner())
            .map(|t| t.pnl())
            .sum();

        let total_loss: f64 = self.trades.iter()
            .filter(|t| !t.is_winner())
            .map(|t| t.pnl().abs())
            .sum();

        if total_loss > 0.0 {
            total_profit / total_loss
        } else {
            f64::INFINITY
        }
    }

    fn print_summary(&self) {
        println!("\n{}", "=".repeat(50));
        println!("–°—Ç—Ä–∞—Ç–µ–≥–∏—è: {}", self.name);
        println!("{}", "=".repeat(50));

        let result = BacktestResult::new(self.trades.clone());
        result.print_report();
    }
}

fn main() {
    // –°—Ç—Ä–∞—Ç–µ–≥–∏—è 1: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è (–≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫, –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä–∞–¥–∞)
    let mut aggressive = Strategy::new("–ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –º–æ–º–µ–Ω—Ç—É–º");
    aggressive.add_trade(Trade::new("BTC", 40000.0, 45000.0, 2.0, TradeType::Long));  // +10000
    aggressive.add_trade(Trade::new("BTC", 45000.0, 42000.0, 2.0, TradeType::Long));  // -6000
    aggressive.add_trade(Trade::new("BTC", 42000.0, 48000.0, 1.5, TradeType::Long));  // +9000
    aggressive.add_trade(Trade::new("BTC", 48000.0, 44000.0, 1.5, TradeType::Long));  // -6000

    // –°—Ç—Ä–∞—Ç–µ–≥–∏—è 2: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫, —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å)
    let mut conservative = Strategy::new("–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ä–µ–¥–Ω–µ–º—É");
    conservative.add_trade(Trade::new("BTC", 40000.0, 41000.0, 1.0, TradeType::Long));  // +1000
    conservative.add_trade(Trade::new("BTC", 41000.0, 40500.0, 1.0, TradeType::Long));  // -500
    conservative.add_trade(Trade::new("BTC", 40500.0, 41500.0, 1.0, TradeType::Long));  // +1000
    conservative.add_trade(Trade::new("BTC", 41500.0, 41200.0, 1.0, TradeType::Long));  // -300
    conservative.add_trade(Trade::new("BTC", 41200.0, 42000.0, 1.0, TradeType::Long));  // +800
    conservative.add_trade(Trade::new("BTC", 42000.0, 41700.0, 1.0, TradeType::Long));  // -300

    aggressive.print_summary();
    conservative.print_summary();

    // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
    println!("\n{}", "=".repeat(50));
    println!("–°–†–ê–í–ù–ï–ù–ò–ï");
    println!("{}", "=".repeat(50));
    println!("–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è PF: {:.2}", aggressive.calculate_profit_factor());
    println!("–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è PF: {:.2}", conservative.calculate_profit_factor());
}
```

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å: Profit Factor –≤–æ –≤—Ä–µ–º–µ–Ω–∏

–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ, –∫–∞–∫ Profit Factor –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–¥–µ–ª–æ–∫:

```rust
struct PerformanceTracker {
    trades: Vec<Trade>,
}

impl PerformanceTracker {
    fn new() -> Self {
        PerformanceTracker {
            trades: Vec::new(),
        }
    }

    fn add_trade(&mut self, trade: Trade) {
        self.trades.push(trade);
        self.print_current_pf();
    }

    fn calculate_profit_factor_at(&self, end_index: usize) -> f64 {
        let trades_slice = &self.trades[0..=end_index];

        let total_profit: f64 = trades_slice.iter()
            .filter(|t| t.is_winner())
            .map(|t| t.pnl())
            .sum();

        let total_loss: f64 = trades_slice.iter()
            .filter(|t| !t.is_winner())
            .map(|t| t.pnl().abs())
            .sum();

        if total_loss > 0.0 {
            total_profit / total_loss
        } else {
            f64::INFINITY
        }
    }

    fn print_current_pf(&self) {
        if !self.trades.is_empty() {
            let pf = self.calculate_profit_factor_at(self.trades.len() - 1);
            println!("–ü–æ—Å–ª–µ {} —Å–¥–µ–ª–æ–∫: PF = {:.2}", self.trades.len(), pf);
        }
    }

    fn plot_pf_curve(&self) {
        println!("\n–≠–≤–æ–ª—é—Ü–∏—è Profit Factor:");
        println!("{}", "=".repeat(60));

        for i in 0..self.trades.len() {
            let pf = self.calculate_profit_factor_at(i);
            let bar_length = if pf.is_finite() {
                (pf * 10.0).min(50.0) as usize
            } else {
                50
            };
            let bar = "‚ñà".repeat(bar_length);
            println!("–°–¥–µ–ª–∫–∞ {:2}: {:.2} | {}", i + 1, pf, bar);
        }
    }
}

fn main() {
    let mut tracker = PerformanceTracker::new();

    println!("–ù–∞—á–∏–Ω–∞–µ–º —Ç–æ—Ä–≥–æ–≤—É—é —Å–µ—Å—Å–∏—é...\n");

    tracker.add_trade(Trade::new("BTC", 40000.0, 42000.0, 1.0, TradeType::Long));
    tracker.add_trade(Trade::new("ETH", 2500.0, 2400.0, 10.0, TradeType::Long));
    tracker.add_trade(Trade::new("BTC", 41000.0, 43000.0, 0.5, TradeType::Long));
    tracker.add_trade(Trade::new("SOL", 100.0, 95.0, 20.0, TradeType::Long));
    tracker.add_trade(Trade::new("BTC", 44000.0, 42000.0, 1.5, TradeType::Short));

    tracker.plot_pf_curve();
}
```

## –ß—Ç–æ –º—ã —É–∑–Ω–∞–ª–∏

| –ö–æ–Ω—Ü–µ–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------|
| Profit Factor | –û—Ç–Ω–æ—à–µ–Ω–∏–µ –æ–±—â–µ–π –ø—Ä–∏–±—ã–ª–∏ –∫ –æ–±—â–∏–º —É–±—ã—Ç–∫–∞–º |
| –§–æ—Ä–º—É–ª–∞ | `–û–±—â–∞—è –≤–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å / –û–±—â–∏–µ –≤–∞–ª–æ–≤—ã–µ —É–±—ã—Ç–∫–∏` |
| –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è | > 1.0 = –ø—Ä–∏–±—ã–ª—å–Ω–æ, < 1.0 = —É–±—ã—Ç–æ—á–Ω–æ |
| –•–æ—Ä–æ—à–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω | 1.5 - 4.0 –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π |
| –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–∏ | PF > 4.0 –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –ø–æ–¥–≥–æ–Ω–∫—É –ø–æ–¥ –∫—Ä–∏–≤—É—é |
| –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥ | –ö–ª—é—á–µ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ |

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

1. **–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥ –ø—Ä–æ—Ç–∏–≤ Profit Factor**: –°–æ–∑–¥–∞–π—Ç–µ –¥–≤–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:
   - –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ê: 70% –ø–æ–±–µ–¥, —Å—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å $100, —Å—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫ $200
   - –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ë: 40% –ø–æ–±–µ–¥, —Å—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å $400, —Å—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫ $100

   –í—ã—á–∏—Å–ª–∏—Ç–µ Profit Factor –¥–ª—è –∫–∞–∂–¥–æ–π. –ö–∞–∫–∞—è –ª—É—á—à–µ?

2. **–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –¥–Ω–µ–≤–Ω–∏–∫–∞**: –ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è:
   - –ß–∏—Ç–∞–µ—Ç —Å–¥–µ–ª–∫–∏ –∏–∑ CSV —Ñ–∞–π–ª–∞ (—Å–∏–º–≤–æ–ª, –≤—Ö–æ–¥, –≤—ã—Ö–æ–¥, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Ç–∏–ø)
   - –í—ã—á–∏—Å–ª—è–µ—Ç Profit Factor
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–±–∏–≤–∫—É –ø–æ —Å–∏–º–≤–æ–ª–∞–º
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ –∞–∫—Ç–∏–≤—ã –∏–º–µ—é—Ç –ª—É—á—à–∏–π PF

3. **–ú–µ—Å—è—á–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–¥–µ–ª–∫–∏ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ –∏ –≤—ã—á–∏—Å–ª–∏—Ç–µ:
   - Profit Factor –∑–∞ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü
   - –û–±—â–∏–π Profit Factor
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ª—É—á—à–∏–µ –∏ —Ö—É–¥—à–∏–µ –º–µ—Å—è—Ü—ã

4. **Risk-Adjusted PF**: –†–∞—Å—à–∏—Ä—å—Ç–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ Profit Factor, –≤–∫–ª—é—á–∏–≤:
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ—Å–∞–¥–∫—É
   - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞
   - –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ—Ü–µ–Ω–∫—É, —Å–æ—á–µ—Ç–∞—é—â—É—é PF —Å –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏

## –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ

1. **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞**: –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä–∞—è:
   - –°–∏–º—É–ª–∏—Ä—É–µ—Ç 100 —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ –¥–≤–∏–∂–µ–Ω–∏—è–º–∏ —Ü–µ–Ω
   - –í—ã—á–∏—Å–ª—è–µ—Ç Profit Factor, –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥ –∏ —á–∏—Å—Ç—É—é –ø—Ä–∏–±—ã–ª—å
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–π –¥–Ω–µ–≤–Ω–æ–π, –Ω–µ–¥–µ–ª—å–Ω—ã–π –∏ –º–µ—Å—è—á–Ω—ã–π PF
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç, –µ—Å–ª–∏ PF –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–æ–∫–∏–π (> 4.0)

2. **–°–∏–º—É–ª—è—Ü–∏—è –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ**:
   - –í–æ–∑—å–º–∏—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º PF (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.0)
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ 1000 —Å–∏–º—É–ª—è—Ü–∏–π —Å–æ —Å–ª—É—á–∞–π–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º —Å–¥–µ–ª–æ–∫
   - –í—ã—á–∏—Å–ª–∏—Ç–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π PF
   - –ü–æ—Å—Ç—Ä–æ–π—Ç–µ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

3. **–ú—É–ª—å—Ç–∏–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ—Ä—Ç—Ñ–µ–ª—å**: –°–æ–∑–¥–∞–π—Ç–µ —Ç—Ä–µ–∫–µ—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π:
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–¥–µ–ª–∫–∏ –ø–æ BTC, ETH –∏ SOL
   - –í—ã—á–∏—Å–ª—è–µ—Ç Profit Factor –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
   - –í—ã—á–∏—Å–ª—è–µ—Ç –æ–±—â–∏–π Profit Factor –ø–æ—Ä—Ç—Ñ–µ–ª—è
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–π –∞–∫—Ç–∏–≤ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –æ–±—â–µ–º—É PF

4. **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è**: –†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, –∫–æ—Ç–æ—Ä–∞—è:
   - –°–ª–µ–¥–∏—Ç –∑–∞ —Å–≤–æ–∏–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º Profit Factor –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –ï—Å–ª–∏ PF –ø–∞–¥–∞–µ—Ç –Ω–∏–∂–µ 1.5, —É–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ 50%
   - –ï—Å–ª–∏ PF –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤—ã—à–µ 2.5, —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ 25%
   - –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏

## –ù–∞–≤–∏–≥–∞—Ü–∏—è

[‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å](../285-previous-chapter/ru.md) | [–°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å ‚Üí](../287-next-chapter/ru.md)
